---
title: Fish Shell Integration
description: Setup and customize fzf for Fish shell with key bindings and fuzzy completion
---

This guide covers Fish-specific setup and customization for fzf shell integration.

## Quick Setup

Add the following line to your `~/.config/fish/config.fish`:

```fish ~/.config/fish/config.fish
# Set up fzf key bindings
fzf --fish | source
```

Then reload your shell configuration:

```fish
source ~/.config/fish/config.fish
```

<Note>
The `--fish` option requires fzf 0.48.0 or later. For older versions, see [Manual Setup](#manual-setup) below.
</Note>

## What Gets Enabled

Running `fzf --fish | source` enables:

<CardGroup cols={2}>
  <Card title="Key Bindings" icon="keyboard">
    - **CTRL-T**: Paste files/directories
    - **CTRL-R**: Search command history
    - **ALT-C**: Navigate to directory
  </Card>
  <Card title="Fuzzy Completion" icon="terminal">
    - `SHIFT-TAB` for fuzzy completion
    - TAB preserves native Fish completion
    - Works with Fish's completion system
  </Card>
</CardGroup>

## Manual Setup (for fzf < 0.48.0)

If you have an older version of fzf, source the shell script directly:

```fish ~/.config/fish/config.fish
# Key bindings and completion
source /usr/share/doc/fzf/examples/key-bindings.fish
```

<Note>
Fish uses a single script file for both key bindings and completion. Common paths:
- **Debian/Ubuntu**: `/usr/share/doc/fzf/examples/key-bindings.fish`
- **Arch Linux**: `/usr/share/fzf/key-bindings.fish`
- **Homebrew**: `/opt/homebrew/opt/fzf/shell/key-bindings.fish` or `/usr/local/opt/fzf/shell/key-bindings.fish`
- **Git install**: `~/.fzf/shell/key-bindings.fish`
</Note>

## Key Differences from Bash/Zsh

Fish shell integration has some unique characteristics:

<CardGroup cols={2}>
  <Card title="Shift-TAB for Completion" icon="keyboard">
    Use **Shift-TAB** instead of `**<TAB>` for fuzzy completion
  </Card>
  <Card title="Native Completion Preserved" icon="check">
    **TAB** continues to use Fish's native completion
  </Card>
  <Card title="Context-Aware CTRL-T" icon="folder">
    Uses the last token as root directory for searches
  </Card>
  <Card title="Limited Configuration" icon="sliders">
    Only `FZF_COMPLETION_OPTS` is supported
  </Card>
</CardGroup>

## Configuration

### Key Bindings

Customize key binding behavior with environment variables:

```fish ~/.config/fish/config.fish
# Preview file content using bat
set -x FZF_CTRL_T_OPTS "
  --walker-skip .git,node_modules,target
  --preview 'bat -n --color=always {}'
  --bind 'ctrl-/:change-preview-window(down|hidden|)'"

# CTRL-Y to copy the command into clipboard
set -x FZF_CTRL_R_OPTS "
  --bind 'ctrl-y:execute-silent(echo -n {2..} | pbcopy)+abort'
  --color header:italic
  --header 'Press CTRL-Y to copy command into clipboard'"

# Print tree structure in the preview window
set -x FZF_ALT_C_OPTS "
  --walker-skip .git,node_modules,target
  --preview 'tree -C {}'"

# Set up fzf key bindings
fzf --fish | source
```

<Warning>
Environment variables must be set **before** the `fzf --fish | source` line using `set -x` (export).
</Warning>

### Fuzzy Completion

Fish fuzzy completion configuration is simpler than Bash/Zsh:

```fish ~/.config/fish/config.fish
# General completion options (only supported variable)
set -x FZF_COMPLETION_OPTS '--border --info=inline'

fzf --fish | source
```

<Note>
Unlike Bash and Zsh, Fish doesn't support `FZF_COMPLETION_TRIGGER`, `FZF_COMPLETION_PATH_OPTS`, or `FZF_COMPLETION_DIR_OPTS`. It integrates with Fish's native completion system instead.
</Note>

## Fish-Specific Features

### Context-Aware CTRL-T

CTRL-T in Fish uses the last token on the command line as the root directory:

```fish
# At the end of this line:
ls /var/<CTRL-T>
# Lists files under /var/, not current directory

# Without a directory path:
ls <CTRL-T>
# Lists files under current directory
```

### Custom CTRL-T Command

When using a custom `FZF_CTRL_T_COMMAND`, use the `$dir` variable:

```fish ~/.config/fish/config.fish
# $dir is set by fzf (defaults to . when last token isn't a directory)
set -x FZF_CTRL_T_COMMAND "command find -L \$dir -type f 2> /dev/null | sed '1d; s#^\./##'"

fzf --fish | source
```

### Fuzzy Completion with Shift-TAB

Fish uses **Shift-TAB** for fuzzy completion, preserving native completion on **TAB**:

```fish
# Native Fish completion (context-aware, command-specific)
vim <TAB>

# fzf fuzzy completion (uses Fish's completion candidates)
vim <SHIFT-TAB>
```

This hybrid approach gives you the best of both worlds.

## Advanced Customization

### Custom Source Commands

Override the default file traversal commands:

```fish ~/.config/fish/config.fish
# Use fd for CTRL-T
set -x FZF_CTRL_T_COMMAND 'fd --type f --strip-cwd-prefix --hidden --follow --exclude .git'

# Use fd for ALT-C
set -x FZF_ALT_C_COMMAND 'fd --type d --hidden --follow --exclude .git'

fzf --fish | source
```

### Custom Command Completion

Define custom fuzzy completion for specific commands:

```fish ~/.config/fish/config.fish
fzf --fish | source

# Custom completion for 'myapp'
function _fzf_complete_myapp
  function _fzf_complete_myapp_post
    awk '{print $1}'
  end
  _fzf_complete --multi --reverse --prompt="myapp> " -- $argv < (myapp --list-all | psub)
  
  functions -e _fzf_complete_myapp_post
end
```

### Git Custom Completion

A more complex example with subcommand handling:

```fish ~/.config/fish/config.fish
fzf --fish | source

function _fzf_complete_git
  switch $argv[2]
    case checkout switch
      _fzf_complete --reverse --no-preview -- $argv < (git branch --all --format='%(refname:short)' | psub)

    case add
      function _fzf_complete_git_post
        awk '{print $NF}'
      end
      _fzf_complete --multi --reverse -- $argv < (git status --short | psub)

    case show log diff
      function _fzf_complete_git_post
        awk '{print $1}'
      end
      _fzf_complete --reverse --no-sort --preview='git show --color=always {1}' -- $argv < (git log --oneline | psub)

    case ''
      __fzf_complete_native "$argv[1] " --query=(commandline -t | string escape)

    case '*'
      set -l -- current_token (commandline -t)
      __fzf_complete_native "$argv $current_token" --query=(string escape -- $current_token) --multi
  end

  functions -e _fzf_complete_git_post
end
```

## Disabling Features

Disable specific key bindings by setting their `*_COMMAND` variable to empty:

```fish ~/.config/fish/config.fish
# Disable CTRL-R and ALT-C, keep only CTRL-T
set -x FZF_CTRL_R_COMMAND ''
set -x FZF_ALT_C_COMMAND ''

fzf --fish | source
```

## Complete Configuration Example

Here's a comprehensive `~/.config/fish/config.fish` configuration:

```fish ~/.config/fish/config.fish
# ============================================================================
# fzf Configuration
# ============================================================================

# General fzf options
set -x FZF_DEFAULT_OPTS "
  --height 40%
  --layout reverse
  --border
  --inline-info
  --color 'fg:#bbccdd,fg+:#ddeeff,bg:#334455,preview-bg:#223344,border:#778899'"

# Use fd instead of find
set -x FZF_DEFAULT_COMMAND 'fd --type f --strip-cwd-prefix --hidden --follow --exclude .git'

# CTRL-T configuration
set -x FZF_CTRL_T_COMMAND 'fd --type f --strip-cwd-prefix --hidden --follow --exclude .git . $dir'
set -x FZF_CTRL_T_OPTS "
  --walker-skip .git,node_modules,target,dist,build
  --preview 'bat -n --color=always --line-range :500 {}'
  --bind 'ctrl-/:change-preview-window(down|hidden|)'
  --bind 'ctrl-y:execute-silent(echo -n {} | pbcopy)'
  --header 'CTRL-/: toggle preview | CTRL-Y: copy path'"

# CTRL-R configuration
set -x FZF_CTRL_R_OPTS "
  --preview 'echo {}'
  --preview-window up:3:hidden:wrap
  --bind 'ctrl-/:toggle-preview'
  --bind 'ctrl-y:execute-silent(echo -n {2..} | pbcopy)+abort'
  --color header:italic
  --header 'Press CTRL-Y to copy command | CTRL-/: toggle preview'"

# ALT-C configuration
set -x FZF_ALT_C_COMMAND 'fd --type d --hidden --follow --exclude .git'
set -x FZF_ALT_C_OPTS "
  --preview 'tree -C {} | head -200'
  --bind 'ctrl-/:change-preview-window(down|hidden|)'"

# Completion configuration
set -x FZF_COMPLETION_OPTS '--border --info=inline'

# Initialize fzf
fzf --fish | source

# Custom git completion
function _fzf_complete_git
  switch $argv[2]
    case checkout switch
      _fzf_complete --reverse --no-preview -- $argv < (git branch --all --format='%(refname:short)' | psub)
    
    case add
      function _fzf_complete_git_post
        awk '{print $NF}'
      end
      _fzf_complete --multi --reverse -- $argv < (git status --short | psub)
    
    case '*'
      set -l -- current_token (commandline -t)
      __fzf_complete_native "$argv $current_token" --query=(string escape -- $current_token) --multi
  end
  
  functions -e _fzf_complete_git_post
end

# Custom docker completion
function _fzf_complete_docker
  switch $argv[2]
    case stop restart rm
      _fzf_complete --multi --reverse -- $argv < (docker ps --format '{{.Names}}' | psub)
    
    case exec
      _fzf_complete --reverse -- $argv < (docker ps --format '{{.Names}}' | psub)
    
    case '*'
      set -l -- current_token (commandline -t)
      __fzf_complete_native "$argv $current_token" --query=(string escape -- $current_token) --multi
  end
end
```

## Fish Version Compatibility

fzf requires Fish 3.1.0 or later. The integration checks your version automatically:

```fish
# View your Fish version
fish --version
```

If you have an older version, you'll see an error message when sourcing the script.

## Integration with Fisher/Oh My Fish

For Fish plugin managers:

<Tabs>
  <Tab title="Fisher">
    ```fish
    # Install via Fisher (if fzf package exists)
    fisher install PatrickF1/fzf.fish
    
    # Or configure manually
    # Add to ~/.config/fish/config.fish
    fzf --fish | source
    ```
  </Tab>
  
  <Tab title="Oh My Fish">
    ```fish
    # Install via OMF (if plugin exists)
    omf install fzf
    
    # Or configure manually
    # Add to ~/.config/fish/config.fish
    fzf --fish | source
    ```
  </Tab>
</Tabs>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Key bindings not working">
    1. Verify fzf is in your PATH: `which fzf`
    2. Check Fish version: `fish --version` (need 3.1.0+)
    3. Reload your config: `source ~/.config/fish/config.fish`
    4. Check for errors: Look at terminal output when sourcing
  </Accordion>

  <Accordion title="Shift-TAB doesn't trigger completion">
    1. Ensure `fzf --fish | source` executed successfully
    2. Check terminal key bindings: Some terminals don't send Shift-TAB correctly
    3. Try reconfiguring terminal emulator key mappings
    4. Test with: `fish_key_reader` (press Shift-TAB to see what's sent)
  </Accordion>

  <Accordion title="CTRL-T doesn't respect directory context">
    1. Ensure you're using `$dir` in custom commands
    2. Check your `FZF_CTRL_T_COMMAND` for proper variable expansion
    3. Test with default command first (remove custom FZF_CTRL_T_COMMAND)
  </Accordion>

  <Accordion title="Custom completion not working">
    1. Ensure function name matches pattern: `_fzf_complete_COMMAND`
    2. Check function is defined after `fzf --fish | source`
    3. Test the function directly: `_fzf_complete_myapp arg1 arg2`
    4. Check for errors with `functions _fzf_complete_myapp`
  </Accordion>
</AccordionGroup>

## Fish-Specific Tips

### Universal Variables

You can use universal variables (persistent across sessions) for fzf configuration:

```fish
# Set once, persists across sessions
set -Ux FZF_DEFAULT_OPTS '--height 40% --layout reverse'
```

### Function Files

Organize custom completion functions in separate files:

```fish
# ~/.config/fish/functions/_fzf_complete_git.fish
function _fzf_complete_git
  # Implementation here
end
```

Fish automatically loads functions from this directory.

### Abbreviations with fzf

Combine Fish abbreviations with fzf:

```fish
# Add to config.fish
abbr -a gco 'git checkout (git branch | fzf | string trim)'
abbr -a gcom 'git checkout (git branch | fzf --query="master" | string trim)'
```

### Event Handlers

You can create event handlers that trigger on specific Fish events:

```fish
function __fzf_on_directory_change --on-variable PWD
  # Custom logic when directory changes
end
```

## Performance Tips

1. **Use fd instead of find**: fd is significantly faster
   ```fish
   set -x FZF_CTRL_T_COMMAND 'fd --type f'
   ```

2. **Exclude large directories**: Skip node_modules, .git, etc.
   ```fish
   set -x FZF_CTRL_T_OPTS '--walker-skip .git,node_modules,target'
   ```

3. **Limit preview size**: Don't preview entire large files
   ```fish
   set -x FZF_CTRL_T_OPTS '--preview "bat --line-range :500 {}"'
   ```

## See Also

- [Key Bindings](/shell/key-bindings) - Detailed key binding documentation
- [Fuzzy Completion](/shell/fuzzy-completion) - Complete completion guide
- [Bash Configuration](/shell/bash) - For Bash users
- [Zsh Configuration](/shell/zsh) - For Zsh users
- [Shell Integration Overview](/shell/overview) - General concepts