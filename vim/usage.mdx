---
title: Using fzf in Vim
description: Master fzf commands, functions, and customization options in Vim and Neovim
---

The fzf Vim plugin provides two core functions and the `:FZF` command for fuzzy finding in your editor.

## Core Components

The plugin provides three main components:

1. **`fzf#run([spec dict])`** - Core function to start fzf with custom options
2. **`fzf#wrap([spec dict])`** - Wraps specs to respect global configuration
3. **`:FZF [options] [path]`** - Basic file selector command

## The :FZF Command

The `:FZF` command provides basic fuzzy file selection:

<CodeGroup>

```vim Basic Usage
" Look for files under current directory
:FZF

" Look for files under your home directory
:FZF ~

" Look for files in /tmp
:FZF /tmp
```

```vim With Options
" With fzf command-line options
:FZF --reverse --info=inline /tmp

" Bang version starts in fullscreen mode
:FZF!
```

</CodeGroup>

### Opening Files

Similar to [ctrlp.vim](https://github.com/kien/ctrlp.vim), use these keys to open selected files:

- `Enter` - Open in current window
- `CTRL-T` - Open in new tab
- `CTRL-X` - Open in horizontal split
- `CTRL-V` - Open in vertical split

<Note>
The environment variables `FZF_DEFAULT_COMMAND` and `FZF_DEFAULT_OPTS` also apply to `:FZF`.
</Note>

## Configuration Options

Customize fzf behavior with global variables:

### g:fzf_action

Customize key bindings for opening files:

```vim
" Default key bindings
let g:fzf_action = {
  \ 'ctrl-t': 'tab split',
  \ 'ctrl-x': 'split',
  \ 'ctrl-v': 'vsplit' }

" Add custom action with function
function! s:build_quickfix_list(lines)
  call setqflist(map(copy(a:lines), '{ "filename": v:val, "lnum": 1 }'))
  copen
  cc
endfunction

let g:fzf_action = {
  \ 'ctrl-q': function('s:build_quickfix_list'),
  \ 'ctrl-t': 'tab split',
  \ 'ctrl-x': 'split',
  \ 'ctrl-v': 'vsplit' }
```

### g:fzf_layout

Control the size and position of the fzf window:

<CodeGroup>

```vim Popup Window
" Popup in center (default)
let g:fzf_layout = { 'window': { 'width': 0.9, 'height': 0.6 } }

" Popup relative to current window
let g:fzf_layout = { 'window': { 'width': 0.9, 'height': 0.6, 'relative': v:true } }

" Anchored to bottom
let g:fzf_layout = { 'window': { 'width': 0.9, 'height': 0.6, 'relative': v:true, 'yoffset': 1.0 } }
```

```vim Split Window
" Bottom split, 40% height
let g:fzf_layout = { 'down': '40%' }

" Top split
let g:fzf_layout = { 'up': '40%' }

" Side splits
let g:fzf_layout = { 'left': '40%' }
let g:fzf_layout = { 'right': '40%' }
```

```vim Vim Commands
" Open in new window
let g:fzf_layout = { 'window': 'enew' }

" Open in new tab
let g:fzf_layout = { 'window': '-tabnew' }

" Open in 10-line split
let g:fzf_layout = { 'window': '10new' }
```

```vim tmux Popup
" In tmux, use tmux popup (requires tmux 3.2+)
if exists('$TMUX')
  let g:fzf_layout = { 'tmux': '90%,70%' }
else
  let g:fzf_layout = { 'window': { 'width': 0.9, 'height': 0.6 } }
endif
```

</CodeGroup>

### g:fzf_colors

Customize colors to match your color scheme:

```vim
let g:fzf_colors =
\ { 'fg':      ['fg', 'Normal'],
  \ 'bg':      ['bg', 'Normal'],
  \ 'hl':      ['fg', 'Comment'],
  \ 'fg+':     ['fg', 'CursorLine', 'CursorColumn', 'Normal'],
  \ 'bg+':     ['bg', 'CursorLine', 'CursorColumn'],
  \ 'hl+':     ['fg', 'Statement'],
  \ 'info':    ['fg', 'PreProc'],
  \ 'border':  ['fg', 'Ignore'],
  \ 'prompt':  ['fg', 'Conditional'],
  \ 'pointer': ['fg', 'Exception'],
  \ 'marker':  ['fg', 'Keyword'],
  \ 'spinner': ['fg', 'Label'],
  \ 'header':  ['fg', 'Comment'] }
```

<Tip>
Run `:echo fzf#wrap()` to see the color options generated from your `g:fzf_colors` configuration.
</Tip>

### g:fzf_history_dir

Enable command history with `CTRL-N` and `CTRL-P` navigation:

```vim
" Store history in this directory
let g:fzf_history_dir = '~/.local/share/fzf-history'
```

## Using fzf#run()

The `fzf#run()` function is the core of Vim integration. It accepts a dictionary specification:

<Steps>

### Basic Example

```vim
" Open file in current window
call fzf#run({'sink': 'e'})

" Open in new tab
call fzf#run({'sink': 'tabedit'})
```

### With Custom Source

```vim
" Use git ls-files as source
call fzf#run({'source': 'git ls-files', 'sink': 'e'})

" Use Vim list as source
call fzf#run({'source': map(split(globpath(&rtp, 'colors/*.vim')),
            \               'fnamemodify(v:val, ":t:r")'),
            \ 'sink': 'colo', 'left': '25%'})
```

### With fzf Options

```vim
call fzf#run({
  \ 'sink': 'tabedit',
  \ 'options': '--multi --reverse'
  \ })

" Prefer list format for complex options
call fzf#run({
  \ 'options': ['--reverse', '--prompt', 'Files> ']
  \ })
```

</Steps>

### Available Options

| Option | Type | Description |
|--------|------|-------------|
| `source` | string/list | External command or Vim list for input |
| `sink` | string/funcref | Vim command or function to handle selection |
| `sink*` (or `sinklist`) | funcref | Function receiving all output lines at once |
| `exit` | funcref | Function called with fzf's exit status |
| `options` | string/list | Options passed to fzf |
| `dir` | string | Working directory |
| `up`/`down`/`left`/`right` | number/string | Window position and size |
| `tmux` | string | tmux popup options (e.g., `90%,70%`) |
| `window` | string/dict | Vim window command or popup settings |

## Using fzf#wrap()

The `fzf#wrap()` function extends your spec with global preferences:

```vim
" Without wrap - ignores global settings
call fzf#run({'source': 'ls'})

" With wrap - respects g:fzf_action, g:fzf_layout, etc.
call fzf#run(fzf#wrap({'source': 'ls'}))
```

### Creating Custom Commands

<Steps>

### Basic Command

```vim
command! LS call fzf#run(fzf#wrap({'source': 'ls'}))
```

### With Bang for Fullscreen

```vim
" :LS opens normally, :LS! opens fullscreen
command! -bang LS call fzf#run(fzf#wrap({'source': 'ls'}, <bang>0))
```

### With Directory Argument

```vim
command! -bang -complete=dir -nargs=? LS
    \ call fzf#run(fzf#wrap({'source': 'ls', 'dir': <q-args>}, <bang>0))
```

### With History Support

```vim
" Name is used for history file if g:fzf_history_dir is set
command! -bang -complete=dir -nargs=? LS
    \ call fzf#run(fzf#wrap('ls', {'source': 'ls', 'dir': <q-args>}, <bang>0))
```

</Steps>

## Terminal Buffer Customization

On modern Vim/Neovim, fzf starts in a terminal buffer. Customize it with `FileType fzf` autocmd:

<CodeGroup>

```vim Hide Statusline
" For cleaner look with bottom layout
let g:fzf_layout = { 'down': '30%' }
autocmd! FileType fzf
autocmd  FileType fzf set laststatus=0 noshowmode noruler
  \| autocmd BufLeave <buffer> set laststatus=2 showmode ruler
```

```vim Custom Terminal Colors (Neovim)
if has('nvim')
  let g:terminal_color_0 = '#4e4e4e'
  let g:terminal_color_1 = '#d68787'
  let g:terminal_color_2 = '#5f865f'
  let g:terminal_color_3 = '#d8af5f'
  let g:terminal_color_4 = '#85add4'
  let g:terminal_color_5 = '#d7afaf'
  let g:terminal_color_6 = '#87afaf'
  let g:terminal_color_7 = '#d0d0d0'
  let g:terminal_color_8 = '#626262'
  let g:terminal_color_9 = '#d75f87'
  let g:terminal_color_10 = '#87af87'
  let g:terminal_color_11 = '#ffd787'
  let g:terminal_color_12 = '#add4fb'
  let g:terminal_color_13 = '#ffafaf'
  let g:terminal_color_14 = '#87d7d7'
  let g:terminal_color_15 = '#e4e4e4'
endif
```

```vim Custom Terminal Colors (Vim)
let g:terminal_ansi_colors = [
  \ '#4e4e4e', '#d68787', '#5f865f', '#d8af5f',
  \ '#85add4', '#d7afaf', '#87afaf', '#d0d0d0',
  \ '#626262', '#d75f87', '#87af87', '#ffd787',
  \ '#add4fb', '#ffafaf', '#87d7d7', '#e4e4e4'
\ ]
```

</CodeGroup>

## Example: Color Scheme Selector

Here's a practical example combining multiple concepts:

```vim
function! s:colors_sink(color)
  execute 'colorscheme' a:color
endfunction

command! -bang Colors
  \ call fzf#run(fzf#wrap('colors', {
  \   'source': map(split(globpath(&rtp, 'colors/*.vim')),
  \                 'fnamemodify(v:val, ":t:r")'),
  \   'sink': function('s:colors_sink'),
  \   'options': ['--preview-window', 'hidden:right:0']
  \ }, <bang>0))
```

<Tip>
For more advanced commands and examples, check out the [fzf.vim](https://github.com/junegunn/fzf.vim) plugin.
</Tip>

## Related Resources

- [fzf.vim](https://github.com/junegunn/fzf.vim) - Collection of useful fzf commands
- [fzf-lua](https://github.com/ibhagwan/fzf-lua) - Lua-based Neovim plugin
- [README-VIM.md](https://github.com/junegunn/fzf/blob/master/README-VIM.md) - Official Vim documentation